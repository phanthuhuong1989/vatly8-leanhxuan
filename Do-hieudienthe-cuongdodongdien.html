<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ThÃ­ nghiá»‡m áº£o: Äo hiá»‡u Ä‘iá»‡n tháº¿ vÃ  cÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n â€“ Váº­t lÃ½ 8</title>
  <style>
    body { 
      font-family: "Times New Roman", serif; 
      margin: 0; 
      padding: 10px; 
      background-color: #ffffff;
    }
    h2 {
      text-align: center;
      color: #0277bd;
      margin-top: 0;
    }
    #simulation-container {
      width: 100%;
      height: 600px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    #chatbot {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 320px;
      background: #e1f5fe;
      border: 1px solid #b3e5fc;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      font-size: 13px;
      z-index: 1000;
      transition: all 0.3s ease;
    }
    #chat-log {
      height: 150px;
      overflow-y: auto;
      margin-bottom: 8px;
      padding: 5px;
      background: white;
      border: 1px solid #81d4fa;
      font-size: 12px;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      margin-top: 5px;
      padding: 5px 10px;
      background: #0277bd;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #015384;
    }
    .toggle-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      color: #015384;
    }
  </style>
</head>
<body>

<h2>ThÃ­ nghiá»‡m áº£o: Äo hiá»‡u Ä‘iá»‡n tháº¿ vÃ  cÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n</h2>
<p><em>TrÆ°á»ng THCS LÃª Anh XuÃ¢n â€“ ÄÃ  Náºµng | MÃ´n Váº­t lÃ½ lá»›p 8</em></p>

<iframe 
  id="simulation-container" 
  src="https://phet.colorado.edu/sims/html/circuit-construction-kit-dc-virtual-lab/latest/circuit-construction-kit-dc-virtual-lab_all.html?locale=vi"
  allowfullscreen>
</iframe>

<div id="chatbot">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <strong>ğŸ’¬ Trá»£ lÃ½ Váº­t lÃ½ AI</strong>
    <button class="toggle-btn" onclick="toggleChatbot()">ğŸ—•</button>
  </div>
  <div id="chat-log">
    <em>ChÃ o em! Em cÃ³ thá»ƒ há»i: â€œLáº¯p máº¡ch tháº¿ nÃ o?â€, â€œDÃ¹ng ampe káº¿ ra sao?â€, â€œCÃ¡ch Ä‘o Ä‘iá»‡n trá»Ÿ?â€, â€œMáº¡ch ná»‘i tiáº¿p â€“ song song?â€â€¦</em>
  </div>
  <input type="text" id="user-input" placeholder="Nháº­p cÃ¢u há»i vá» máº¡ch Ä‘iá»‡n..." onkeypress="if(event.key==='Enter') sendQuestion()" />
  <button onclick="sendQuestion()">Gá»­i</button>
</div>

<script>
let isChatbotVisible = true;

function toggleChatbot() {
  const chatbot = document.getElementById("chatbot");
  if (isChatbotVisible) {
    // Thu nhá»
    chatbot.style.height = "40px";
    chatbot.style.overflow = "hidden";
    chatbot.innerHTML = `
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <strong>ğŸ’¬ Trá»£ lÃ½ Váº­t lÃ½ AI</strong>
        <button class="toggle-btn" onclick="toggleChatbot()">ğŸ——</button>
      </div>
    `;
  } else {
    // Má»Ÿ rá»™ng
    chatbot.style.height = "auto";
    chatbot.style.overflow = "visible";
    chatbot.innerHTML = `
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <strong>ğŸ’¬ Trá»£ lÃ½ Váº­t lÃ½ AI</strong>
        <button class="toggle-btn" onclick="toggleChatbot()">ğŸ—•</button>
      </div>
      <div id="chat-log" style="height: 150px; overflow-y: auto; margin-bottom: 8px; padding: 5px; background: white; border: 1px solid #81d4fa; font-size: 12px;"></div>
      <input type="text" id="user-input" placeholder="Nháº­p cÃ¢u há»i vá» máº¡ch Ä‘iá»‡n..." style="width: 100%; padding: 5px; font-size: 13px; border: 1px solid #ccc; border-radius: 4px;" onkeypress="if(event.key==='Enter') sendQuestion()" />
      <button onclick="sendQuestion()" style="margin-top: 5px; padding: 5px 10px; background: #0277bd; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Gá»­i</button>
    `;
    // KhÃ´i phá»¥c lá»‹ch sá»­ (táº¡m thá»i)
    document.getElementById("chat-log").innerHTML = `<em>ChÃ o em! Em cÃ³ thá»ƒ há»i: â€œLáº¯p máº¡ch tháº¿ nÃ o?â€, â€œDÃ¹ng ampe káº¿ ra sao?â€, â€œCÃ¡ch Ä‘o Ä‘iá»‡n trá»Ÿ?â€, â€œMáº¡ch ná»‘i tiáº¿p â€“ song song?â€â€¦</em>`;
  }
  isChatbotVisible = !isChatbotVisible;
}

function sendQuestion() {
  const input = document.getElementById("user-input");
  const question = input.value.trim();
  if (!question) return;

  const chatLog = document.getElementById("chat-log");
  chatLog.innerHTML += `<div><b>Báº¡n:</b> ${question}</div>`;

  let answer = "Cáº£m Æ¡n em! ÄÃ¢y lÃ  ná»n táº£ng quan trá»ng Ä‘á»ƒ hiá»ƒu vá» Ä‘iá»‡n â€“ tá»« bÃ³ng Ä‘Ã¨n Ä‘áº¿n Ä‘iá»‡n thoáº¡i!";

  const lower = question.toLowerCase();

  if ((lower.includes("kÃ©o") || lower.includes("chá»n")) && (lower.includes("linh kiá»‡n") || lower.includes("láº¯p máº¡ch") || lower.includes("máº¡ch cÆ¡ báº£n"))) {
    answer = "âœ… Em kÃ©o cÃ¡c linh kiá»‡n sau tá»« kho sang vÃ¹ng lÃ m viá»‡c: **pin**, **bÃ³ng Ä‘Ã¨n**, **dÃ¢y dáº«n**, **cÃ´ng táº¯c**. ÄÃ³ lÃ  máº¡ch cÆ¡ báº£n nháº¥t!";
  }
  else if ((lower.includes("ná»‘i dÃ¢y") || lower.includes("ná»‘i")) && (lower.includes("Ä‘Ãºng") || lower.includes("hoáº¡t Ä‘á»™ng"))) {
    answer = "âœ… DÃ¢y pháº£i **ná»‘i cháº¯c cháº¯n** giá»¯a cÃ¡c Ä‘áº§u linh kiá»‡n (xuáº¥t hiá»‡n cháº¥m trÃ²n mÃ u). Náº¿u cÃ³ **khoáº£ng há»Ÿ**, máº¡ch sáº½ há»Ÿ â†’ Ä‘Ã¨n khÃ´ng sÃ¡ng.";
  }
  else if ((lower.includes("thay Ä‘á»•i") || lower.includes("Ä‘iá»u chá»‰nh")) && (lower.includes("Ä‘iá»‡n trá»Ÿ") || lower.includes("Ä‘iá»‡n Ã¡p") || lower.includes("pin"))) {
    answer = "âœ… Nháº¥p vÃ o **pin** hoáº·c **Ä‘iá»‡n trá»Ÿ** â†’ kÃ©o thanh trÆ°á»£t Ä‘á»ƒ thay Ä‘á»•i **Ä‘iá»‡n Ã¡p (V)** hoáº·c **giÃ¡ trá»‹ Ä‘iá»‡n trá»Ÿ (Î©)**.";
  }
  else if ((lower.includes("ampe káº¿") || lower.includes("vÃ´n káº¿") || lower.includes("Ä‘o")) && (lower.includes("dÃ¹ng") || lower.includes("cÃ¡ch") || lower.includes("Ä‘Ãºng"))) {
    answer = "âœ… **Ampe káº¿**: máº¯c **ná»‘i tiáº¿p** trong máº¡ch. **VÃ´n káº¿**: máº¯c **song song** vá»›i linh kiá»‡n cáº§n Ä‘o. Nhá»› kiá»ƒm tra cá»±c (+) vÃ  (-)!";
  }
  else if ((lower.includes("máº¡ch") || lower.includes("láº¯p")) && (lower.includes("ná»‘i tiáº¿p") || lower.includes("song song"))) {
    answer = "âœ… **Ná»‘i tiáº¿p**: cÃ¡c linh kiá»‡n ná»‘i **liá»n nhau thÃ nh 1 Ä‘Æ°á»ng**. **Song song**: chia **2 nhÃ¡nh trá»Ÿ lÃªn**, Ä‘áº§u vÃ o/ra ná»‘i chung.";
  }
  else if ((lower.includes("kiá»ƒm tra") || lower.includes("thá»­")) && (lower.includes("dáº«n Ä‘iá»‡n") || lower.includes("váº­t liá»‡u"))) {
    answer = "âœ… KÃ©o váº­t liá»‡u (gá»—, Ä‘á»“ng, nhá»±a...) vÃ o máº¡ch â†’ náº¿u **Ä‘Ã¨n sÃ¡ng**, váº­t liá»‡u **dáº«n Ä‘iá»‡n**. Náº¿u khÃ´ng â†’ **cÃ¡ch Ä‘iá»‡n**.";
  }
  else if ((lower.includes("quan sÃ¡t") || lower.includes("biáº¿t")) && (lower.includes("máº¡ch hoáº¡t Ä‘á»™ng") || lower.includes("bÃ¬nh thÆ°á»ng"))) {
    answer = "âœ… Máº¡ch hoáº¡t Ä‘á»™ng khi: **Ä‘Ã¨n sÃ¡ng**, **ampe káº¿ cÃ³ sá»‘ Ä‘á»c**, **electron (cháº¥m xanh) di chuyá»ƒn liÃªn tá»¥c** trong dÃ¢y dáº«n.";
  }

  chatLog.innerHTML += `<div style="background:#e1f5fe; padding:5px; margin:5px 0; border-left:3px solid #0277bd;"><b>AI:</b> ${answer}</div>`;
  input.value = "";
  chatLog.scrollTop = chatLog.scrollHeight;
}
</script>

</body>
</html>